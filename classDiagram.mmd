classDiagram
    %% ============================
    %% Core Engine
    %% ============================
    class GameMaster {
        -running: boolean
        -deltaTime: float
        -shapeRenderer: ShapeRenderer
        - entityManager: EntityManager         
        - collisionManager: CollisionManager   
        - movementManager: MovementManager

        +init(): void
        +update(dt: float) void
        +render() void
        +dispose() void
        +run() void
    }

    class IManager {
        <<interface>>
        +initialize()
        +update(deltaTime)
        +shutdown()
    }

    IManager <|.. SceneManagement
    IManager <|.. EntityManager
    IManager <|.. CollisionManager
    IManager <|.. MovementManager
    IManager <|.. IOManager

    %% ============================
    %% Scene Management
    %% ============================
    class SceneManagement {
        +current: Scene
        -scenes: Map<String, Scene>
        +addScene(name: String, scene)
        +loadScene(name: String) void
        +unloadScene(name: String)
        +transitionTo(name: String)
        +getCurrent() Scene
    }

    class SceneManager {
        -entities: List<Entity>
        +create(e: Entity) void
        +remove(e: Entity) void
        +getAll() List(Entity)
        +update(dt: float) void
    }

    class Scene {
        -name: String
        -entity Manager
        -collision Manager
        -io Manager
    }

    SceneManagement "1" --> "*" SceneManager
    Scene "1" --> "*" SceneManagement
    SceneManagement ..|> AbstractEngine: uses

    %% ============================
    %% Entity & Component Model
    %% ============================
    class EntityManager {
        +createEntity() Entity
        +removeEntity(id)
        +getEntities() : List
        +updateEntities(deltaTime)
    }

    class Entity {
        <<abstract>>
        +id
        +update(deltaTime)
        +addComponent(component : Component)
        +removeComponent(component : Component)
        +getComponent(typeId)
    }

    EntityManager "1" --> "*" Entity : manages

    class CollidableEntity
    class NonCollidableEntity

    Entity <|-- CollidableEntity
    Entity <|-- NonCollidableEntity

    class Component {
        <<abstract>>
        +onAttach(entity : Entity)
        +onDetach()
        +update(deltaTime)
    }

    Entity "1" *-- "*" Component : composed of

    %% ============================
    %% Collision Management
    %% ============================


    CollidableEntity ..|> Collidable

    class CollisionManager {
        collidables : List
        + detectCollisions()
        + checkCollision(a, b)
        +resolveCollision(a,b)
        + update()
    }

    class Collidable {
        <<interface>>
        +getBounds()
        + onCollision(other) void
    }

    CollisionManager <-- Collidable :uses
    %% ============================
    %% Movement Management
    %% ============================
    class MovementManager {
        +updateMovement(entities : List, deltaTime)
    }

    MovementManager --> Entity : updates

    %% ============================
    %% Input / Output Management
    %% ============================
    class IOManager {
        +pollInput()
        +dispatchInput()
        +render()
    }

    class InputHandler {
        +getInputState()
    }

    class OutputHandler {
        +drawScene(scene : Scene)
        +playAudio()
    }

    IOManager --> InputHandler
    IOManager --> OutputHandler
