---
config:
  layout: elk
---
classDiagram
direction TB

class GameMaster {
  -running: boolean
  -deltaTime: float
  -sceneManager: SceneManager
  -entityManager: EntityManager
  +init(): void
  +run(): void
  +dispose(): void
}

class IManager {
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
}

class SceneManager {
  -current: Scene
  -scenes: Map~String, Scene~
  +addScene(name: String, scene: Scene): void
  +loadScene(name: String): void
  +unloadScene(name: String): void
  +transitionTo(name: String): void
  +getCurrent(): Scene
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
}

class EntityManager {
  -entities: List~Entity~
  -entitiesToAdd: List~Entity~
  -entitiesToRemove: List~Entity~
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
  +addEntity(entity: Entity): void
  +removeEntity(entity: Entity): void
  +getEntityCount(): int
}

class Scene {
  -name: String
  #entityManager: EntityManager
  -collisionManager: CollisionManager
  -movementManager: MovementManager
  -ioManager: IOManager
  +onEnter(): void
  +onExit(): void
  +update(deltaTime: float): void
  +render(): void
  +dispose(): void
}

class CollisionManager {
  -collidables: List~CollisionComponent~
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
  +detectCollisions(): void
  +checkCollision(a: CollisionComponent, b: CollisionComponent): boolean
  #handleCollision(a: CollisionComponent, b: CollisionComponent): void
}

class MovementManager {
  -strategies: List~MovementStrategy~
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
  +addMovementStrategy(strategy: MovementStrategy): void
  +removeMovementStrategy(strategy: MovementStrategy): void
  +updateMovement(targets: List~IMoveable~, deltaTime: float): void
}

class IOManager {
  -input: InputManager
  -output: OutputManager
  +initialize(): void
  +update(deltaTime: float): void
  +shutdown(): void
  +getInput(): InputManager
  +getOutput(): OutputManager
}

class Entity {
  #positionX: float
  #positionY: float
  #width: float
  #height: float
  #velocityX: float
  #velocityY: float
  #active: boolean
  +update(deltaTime: float): void
  +render(): void
  +dispose(): void
  +setBounds(x: float, y: float, width: float, height: float): void
  +setVelocity(velocityX: float, velocityY: float): void
  +setActive(active: boolean): void
  +isActive(): boolean
}

class StaticComponent {
  -owner: Entity
  -enabled: boolean
  +onAttach(entity: Entity): void
  +onDetach(): void
  +setEnabled(enabled: boolean): void
  +isEnabled(): boolean
}

class DynamicComponent {
  -owner: Entity
  -enabled: boolean
  +onAttach(entity: Entity): void
  +onDetach(): void
  +update(deltaTime: float): void
  +setEnabled(enabled: boolean): void
  +isEnabled(): boolean
}

class CollisionComponent {
  -collisionLayer: int
  -trigger: boolean
  -bounds: Rectangle
  +getBounds(): Rectangle
  +onCollisionEnter(other: CollisionComponent): void
  +onCollisionStay(other: CollisionComponent): void
  +onCollisionExit(other: CollisionComponent): void
  +getCollisionLayer(): int
  +setCollisionLayer(layer: int): void
  +canCollideWith(other: CollisionComponent): boolean
}

class MovementStrategy {
  +applyMovement(target: IMoveable, deltaTime: float): void
}

class IMoveable {
  +setVelocity(velocityX: float, velocityY: float): void
  +isActive(): boolean
}

class InputManager {
  +isKeyPressed(key: int): boolean
  +isKeyJustPressed(key: int): boolean
  +getMousePosition(): Vector2
}

class OutputManager {
  +begin(): void
  +draw(entity: Entity): void
  +end(): void
  +dispose(): void
}

<<interface>> IManager
<<abstract>> Scene
<<abstract>> Entity
<<interface>> MovementStrategy
<<interface>> IMoveable

GameMaster "1" *-- "1" SceneManager
GameMaster "1" *-- "1" EntityManager

IManager <|.. SceneManager
IManager <|.. EntityManager
IManager <|.. CollisionManager
IManager <|.. MovementManager
IManager <|.. IOManager

SceneManager "1" *-- "*" Scene : owns
SceneManager "1" --> "1" Scene : current
GameMaster ..> SceneManager : delegates loop

EntityManager "1" *-- "*" Entity : manages

Scene "1" *-- "1" CollisionManager : owns
Scene "1" *-- "1" MovementManager : owns
Scene "1" *-- "1" IOManager : owns

Entity "1" *-- "*" StaticComponent : composed of
Entity "1" *-- "*" DynamicComponent : composed of
DynamicComponent <|-- CollisionComponent : extends

CollisionManager ..> CollisionComponent : queries

MovementManager "1" *-- "*" MovementStrategy : uses
MovementManager ..> IMoveable : updates
IMoveable <|.. Entity : implemented by

IOManager "1" *-- "1" InputManager
IOManager "1" *-- "1" OutputManager

Scene ..> EntityManager : uses
